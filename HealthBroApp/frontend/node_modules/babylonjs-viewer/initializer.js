"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var defaultViewer_1 = require("./viewer/defaultViewer");
var mappers_1 = require("./configuration/mappers");
var globals_1 = require("./configuration/globals");
/**
 * Will attach an init function the the DOMContentLoaded event.
 * The init function will be removed automatically after the event was triggered.
 */
function initListeners() {
    document.addEventListener("DOMContentLoaded", init);
    function init(event) {
        document.removeEventListener("DOMContentLoaded", init);
        if (globals_1.viewerGlobals.disableInit) {
            return;
        }
        InitTags();
    }
}
exports.initListeners = initListeners;
/**
 * Select all HTML tags on the page that match the selector and initialize a viewer
 *
 * @param selector the selector to initialize the viewer on (default is 'babylon')
 */
function InitTags(selector) {
    if (selector === void 0) { selector = 'babylon'; }
    var elements = document.querySelectorAll(selector);
    for (var i = 0; i < elements.length; ++i) {
        var element = elements.item(i);
        // get the html configuration
        var configMapper = mappers_1.mapperManager.getMapper('dom');
        var config = configMapper.map(element);
        var viewer = new defaultViewer_1.DefaultViewer(element, config);
    }
}
exports.InitTags = InitTags;
//# sourceMappingURL=initializer.js.map